<div class="search-bar-container">
  <div class="search-bar-input">
    <%= simple_form_for :search, html: { class: "flexsearch"}, url: products_path, method: :get do |f| %>
    <%= f.input :query, label: false, placeholder: "Find a product" %>
    <%= f.submit "Search" %>
    <% end %>
  </div>
</div>


<h1 class="index-page-title">CURRENT SEARCH</h1>
  <div class="main-container-index">
    <div class="grid-card-products">
      <% if @products.first.present? %>
        <% @products.each do |product|%>
          <div class="index-card-products">
            <%if product.photo.attached? %>
              <%= cl_image_tag product.photo.key, class: "products-image"%>
            <% end %>

              <div class="product-card-content">
              <h2 class="product-card-name"> <%= link_to product.name, product_path(product), {:style=>'color:#000; text-decoration: none'} %>
              </h2>
                <div class="products-card-detail">
                  <p> <%= product.detail %></p>
                </div>
              <h3 class="pricing-card-products">â‚¬ <%= product.price %></h3>
            </div>
          </div>

        <% end %>
      <% else %>
        <h4>Sorry, we don't have this product ðŸ˜”</h4>
      <% end %>



    </div>
      <div id="map" style="width: 40%; height: 100vh;"
        data-markers="<%= @markers.to_json %>"
        data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
</div>
